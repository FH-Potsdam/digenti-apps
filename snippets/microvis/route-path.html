<!DOCTYPE html>
<meta charset="utf-8">
<style> /* set the CSS */

body { font: 12px Arial;}

.line {
    stroke: steelblue;
    stroke-width: 2;
    fill: none;
}

.area {
    stroke: none;
    /*stroke-width: 2;*/
    fill: steelblue;
    fill-opacity: 0.3;
}

</style>
<body>

<!-- load the d3.js library -->
<script src="http://d3js.org/d3.v3.min.js"></script>

<script>

// Set the dimensions of the canvas / graph
var width = 600,
    height = 270;
// var margin = {top: 30, right: 20, bottom: 30, left: 50},
//     width = 600 - margin.left - margin.right,
//     height = 270 - margin.top - margin.bottom;

// Parse the date / time
// var parseDate = d3.time.format("%d-%b-%y").parse;

// Set the ranges
var x = d3.scale.linear().range([0, width]);
var y = d3.scale.linear().range([height, 0]);


// Check interpolations here:
// http://jorditost.local:5757/snippets/microvis/graph.html

// Define the line
var line = d3.svg.line()
    .interpolate("basis")
    .x(function(d, i) { return x(i); })
    .y(function(d, i) { return y(d[2]); })

var area = d3.svg.area()
    .interpolate("basis")
    .x(function(d, i) { return x(i); })
    .y0(height)
    .y1(function(d, i) { return y(d[2]); })

// Adds the svg canvas
var svg = d3.select("body")
    .append("svg")
        .attr("width", width)
        .attr("height", height)
        // .attr("width", width + margin.left + margin.right)
        // .attr("height", height + margin.top + margin.bottom)
    .append("g")
        // .attr("transform",
        //       "translate(" + margin.left + "," + margin.top + ")");

// Get the data
d3.json("data/route.json", function(error, json) {

    console.log(json);
    var routeData = json.route.geometry.coordinates;

    // console.log(data);
    console.log("length: " + routeData.length + ", min: " + d3.min(routeData, function(d) { return d[2]; }) + ", max: " + d3.max(routeData, function(d) { return d[2]; }));

    // Scale the range of the data
    x.domain([0, routeData.length]);
    y.domain([0, d3.max(routeData, function(d) { return d[2]; })]);

    // Add the valueline path.
    svg.append("path")
        .attr("class", "line")
        .attr("d", line(routeData));

    svg.append("path")
        .attr("class", "area")
        .attr("d", area(routeData));

});


</script>
</body>
